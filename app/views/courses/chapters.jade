//- Course index (Chapter list)
include _header
.container-fluid.course-index.inner-index
  .row-fluid
    .course-header
      - if(typeof(course.image) != 'undefined')
        .course-img
          img(src='#{course.image}')
      .course-content
        h2 #{course.title}
        p #{course.content}
        - if(user != undefined && user.role == 'admin')
          .btn-strip
            a.btn.btn-success(href="/chapters/create/#{course._id}") Add Chapter
            a.btn(href='/courses/#{course._id}/edit/') Edit Course Info
            a.btn.btn-danger(href='/courses/#{course._id}/remove/') Delete Course

  .row-fluid
    ul.chapters
      - if(typeof(course.chapters) != 'undefined')
        each chapter in course.chapters
          - if(chapter.status == 'published' || (user != undefined && user.role == 'admin'))
            li.chapter
              a(href='/chapters/#{chapter.id}/')
                h3
                  #{chapter.title}
              - if(user != undefined && user.role == 'admin')
                - if(chapter.status != 'published')
                  | (Draft)
                a.btn.btn-danger.pull-right(href='/chapters/#{chapter.id}/remove', style='margin-right: 5px;') Delete
                - if(chapter.status != 'published')
                  a.btn.btn-success.pull-right(href='/chapters/#{chapter.id}/publish', style='margin-right: 5px;') Publish
                - else
                  a.btn.btn-success.pull-right(href='/chapters/#{chapter.id}/unpublish', style='margin-right: 5px;') Unpublish
                a.btn.pull-right(href='/chapters/#{chapter.id}/edit', style='margin-right: 5px;') Edit
              .progress(style='margin: 10px 0;')
                .bar(style="width: 0%;")
